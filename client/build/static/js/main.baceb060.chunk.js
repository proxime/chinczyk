(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),i=a.n(r),o=a(9),l=a(15),s=a(1),u=a(7),m=a.n(u),f=a(14),d=a(16),p=a.n(d),E=function(e){e?p.a.defaults.headers.common["x-auth-token"]=e:delete p.a.defaults.headers.common["x-auth-token"]},g=a(65),b=a.n(g).a.connect("http://localhost:5000"),_=function(e){return function(t){t({type:"TOGGLE_LOGIN_WINDOW",payload:e})}},v=function(e){return{type:"SET_AUTH_LOADING",payload:e}},y=function(){return function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.token){e.next=4;break}E(localStorage.token),e.next=5;break;case 4:return e.abrupt("return");case 5:return e.prev=5,t(v(!0)),e.next=9,p.a.get("/api/auth");case 9:a=e.sent,b.emit("login",{id:a.data._id,login:a.data.login}),t({type:"GET_USER",payload:a.data}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),t({type:"AUTH_ERROR",payload:[{msg:"Co\u015b posz\u0142o nie tak",param:"token"}]});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t){return function(){var a=Object(f.a)(m.a.mark((function a(n){var c,r,i,o,l;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(v(!0)),a.prev=1,c={headers:{"Content-Type":"application/json"}},r=JSON.stringify({login:e,password:t}),a.next=6,p.a.post("/api/auth/register",r,c);case 6:i=a.sent,o=i.data.token,window.localStorage.setItem("token",o),n(y()),n({type:"CREATE_ACCOUNT"}),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),l=a.t0.response.data.errors,n({type:"AUTH_ERROR",payload:l});case 17:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()},O=function(e,t){return function(){var a=Object(f.a)(m.a.mark((function a(n){var c,r,i,o,l;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(v(!0)),a.prev=1,c={headers:{"Content-Type":"application/json"}},r=JSON.stringify({login:e,password:t}),a.next=6,p.a.post("/api/auth/login",r,c);case 6:i=a.sent,o=i.data.token,window.localStorage.setItem("token",o),n(y()),n({type:"LOGIN"}),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),l=a.t0.response.data.errors,n({type:"AUTH_ERROR",payload:l});case 17:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}()},N=function(){return b.emit("logout"),{type:"LOGOUT"}},j=function(){var e=Object(s.c)((function(e){return e.auth.loading})),t=Object(s.c)((function(e){return e.auth.user})),a=Object(s.b)(),n=function(e){a(_(e))};return c.a.createElement("div",{className:"top-bar"},c.a.createElement("div",{className:"top-bar__title"},"Chi\u0144czyk"),!e&&c.a.createElement("div",{className:"top-bar__panel"},t?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"top-bar__login",onClick:function(){a(N())}},"Wyloguj si\u0119"),c.a.createElement(o.b,{to:"/create-game",className:"top-bar__create "},"Stw\xf3rz gr\u0119")):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"top-bar__login",onClick:function(){return n("login")}},"Zaloguj si\u0119"),c.a.createElement("div",{className:"top-bar__register",onClick:function(){return n("register")}},"Rejestracja"))))},k=a(20),w=a(2),C=a(4),A=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){e.firstInput&&t.current.focus()}),[e.firstInput]),c.a.createElement("div",{className:"authentication__input-container"},c.a.createElement("label",null,c.a.createElement("p",{className:"authentication__input-title"},e.text),c.a.createElement("input",{className:"authentication__input",type:e.type,name:e.name,onChange:e.onChange,value:e.value,ref:t}),c.a.createElement("p",{className:"authentication__input-error"},e.error)))},T=a(29),S=a(19),z=a(67),R=a.n(z);function G(){var e=Object(T.a)(["\n    display: block;\n    margin: 30px auto;\n"]);return G=function(){return e},e}var x=Object(S.css)(G()),L=function(e){var t=e.size;return c.a.createElement("div",{className:"sweet-loading"},c.a.createElement(R.a,{css:x,size:t,color:"#ff8f00",loading:!0}))},I=function(e){var t=e.setOpenNavigation,a=e.scrollWhenChange,r=Object(n.useState)({login:"",password:""}),i=Object(C.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)({login:"",password:"",other:""}),d=Object(C.a)(u,2),p=d[0],E=d[1],g=Object(s.c)((function(e){return e.auth.loading})),b=Object(s.c)((function(e){return e.auth.errors})),_=Object(s.b)(),v=o.login,y=o.password;Object(n.useEffect)((function(){return document.querySelector("body").classList.add("disabled"),function(){document.querySelector("body").classList.remove("disabled")}}),[]),Object(n.useEffect)((function(){b&&E((function(e){return Object(w.a)({},e,{},b)}))}),[b]);var h=Object(n.useCallback)((function(e){e.persist(),l((function(t){return Object(w.a)({},t,Object(k.a)({},e.target.name,e.target.value))}))}),[l]),N=function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E({login:"",password:"",other:""}),a=!1,v||(E((function(e){return Object(w.a)({},e,{login:"Wprowad\u017a prawid\u0142ow\u0105 nazw\u0119 u\u017cytkownika"})})),a=!0),y||(E((function(e){return Object(w.a)({},e,{password:"Wprowad\u017a has\u0142o"})})),a=!0),!a){e.next=7;break}return e.abrupt("return");case 7:_(O(v,y));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"authentication__title"},"Zaolguj si\u0119"),c.a.createElement("div",{className:"authentication__desc"},"Zaloguj przy pomocy nazwy uytkownika"),g?c.a.createElement(L,{size:150}):c.a.createElement("form",{className:"authentication__form",onSubmit:N,noValidate:!0},c.a.createElement(A,{text:"Nazwa uytkownika",type:"text",name:"login",onChange:h,value:v,error:p.login,firstInput:!0}),c.a.createElement(A,{text:"Has\u0142o",type:"password",name:"password",onChange:h,value:y,error:p.password}),c.a.createElement("div",{className:"authentication__button-container"},c.a.createElement("button",{className:"authentication__button"},"Zaloguj")),p.other&&c.a.createElement("div",{className:"authentication__bad-credential"},p.other)),c.a.createElement("div",{className:"authentication__change",onClick:function(){t("register"),a()}},"Nie masz konta?"))},M=a(68),P=a.n(M),W=function(e){var t=e.setOpenNavigation,a=e.scrollWhenChange,r=Object(n.useState)({login:"",password:""}),i=Object(C.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)({login:"",password:"",other:""}),d=Object(C.a)(u,2),p=d[0],E=d[1],g=Object(s.c)((function(e){return e.auth.loading})),b=Object(s.c)((function(e){return e.auth.errors})),_=Object(s.b)(),v=o.login,y=o.password;Object(n.useEffect)((function(){return document.querySelector("body").classList.add("disabled"),function(){document.querySelector("body").classList.remove("disabled")}}),[]),Object(n.useEffect)((function(){b&&E((function(e){return Object(w.a)({},e,{},b)}))}),[b]);var O=Object(n.useCallback)((function(e){e.persist(),l((function(t){return Object(w.a)({},t,Object(k.a)({},e.target.name,e.target.value))}))}),[l]),N=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E({login:"",password:"",other:""}),a=!1,n={login:{presence:!0,length:{minimum:4}},password:{presence:!0,length:{minimum:6}}},(c=P()({login:v,password:y},n))&&(c.login&&(E((function(e){return Object(w.a)({},e,{login:"Login musi zawiera\u0107 minimum 4 znaki"})})),a=!0),c.password&&(E((function(e){return Object(w.a)({},e,{password:"Has\u0142o musi zawiera\u0107 minimum 6 znak\xf3w"})})),a=!0)),!a){e.next=8;break}return e.abrupt("return");case 8:_(h(v,y));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"authentication__title"},"Rejestracja"),c.a.createElement("div",{className:"authentication__desc"},"Rejestracja przy pomocy nazwy u\u017cytkownika"),g?c.a.createElement(L,{size:150}):c.a.createElement("form",{className:"authentication__form",onSubmit:N,noValidate:!0},c.a.createElement(A,{text:"Nazwa u\u017cytkownika",type:"text",name:"login",onChange:O,value:v,error:p.login,firstInput:!0}),c.a.createElement(A,{text:"Has\u0142o",type:"password",name:"password",onChange:O,value:y,error:p.password}),c.a.createElement("div",{className:"authentication__button-container"},c.a.createElement("button",{className:"authentication__button"},"Zarejestruj"))),c.a.createElement("div",{className:"authentication__change",onClick:function(){t("login"),a()}},"Masz ju\u017c konto?"))},D=(a(145),function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(s.c)((function(e){return e.auth.openWinow})),r=Object(s.b)(),i=function(){t.current.scrollTo({top:0,behavior:"smooth"})},o=function(e){r(_(e))};return a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"authentication__popup",onClick:function(e){e.target===t.current&&o(null)},ref:t},c.a.createElement("div",{className:"authentication",ref:e},c.a.createElement("div",{className:"authentication__close-container"},c.a.createElement("div",{className:"authentication__close",onClick:function(){return o(null)}},c.a.createElement("i",{className:"fas fa-times"}))),"login"===a?c.a.createElement(I,{setOpenNavigation:o,scrollWhenChange:i}):c.a.createElement(W,{setOpenNavigation:o,scrollWhenChange:i})))):null}),U=a(69),F=a.n(U);function H(){var e=Object(T.a)(["\n    display: block;\n    margin: 0 auto;\n"]);return H=function(){return e},e}var K=Object(S.css)(H()),V=function(e){var t=e.size;return c.a.createElement("div",{className:"sweet-loading"},c.a.createElement(F.a,{css:K,size:t,color:"#ff8f00",loading:!0}))},Y=function(e){var t=e.name,a=e.id,r=Object(n.useState)(!1),i=Object(C.a)(r,2),o=i[0],l=i[1];return c.a.createElement("div",{className:"player-item"},c.a.createElement("div",{className:"player-item__name"},t),o?c.a.createElement(V,{size:30}):c.a.createElement("div",{className:"player-item__button",onClick:function(){o||(b.emit("invitePlayer",a),l(!0))}},"Zapro\u015b"))},Z=function(){var e=Object(s.c)((function(e){return e.game.players})).map((function(e){return c.a.createElement(Y,{key:e.socket,name:e.login,id:e.socket})}));return c.a.createElement("div",{className:"players__list"},c.a.createElement("div",{className:"create-game__buttons"},c.a.createElement("div",{className:"create-game__refresh",onClick:function(){b.emit("refreshPlayersList")}},c.a.createElement("i",{className:"fas fa-redo"}))),e)},q={0:"#2980b9",1:"#f1c40f",2:"#c0392b",3:"#27ae60"},J=function(e){var t=e.color,a=e.player,n=Object(s.c)((function(e){return e.game.gamePlayers})),r=Object(s.c)((function(e){return e.auth.userId})),i=Object(s.c)((function(e){return e.game.isCreator}));return c.a.createElement("div",{className:"create-game__player"},c.a.createElement("div",{className:"create-game__player-content"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"create-game__player-waiting"},c.a.createElement("i",{className:"far fa-user",style:{color:q[t]}})),c.a.createElement("div",{className:"create-game__player-name"},a.login),r!==a.key&&i&&c.a.createElement("div",{className:"create-game__player-options"},c.a.createElement("div",{className:"create-game__player-option",onClick:function(){n&&b.emit("kick",{gameId:n.id,playerId:a.key})}},c.a.createElement("i",{className:"fas fa-times"})))):c.a.createElement(L,{size:100})))},B=function(){var e=Object(s.c)((function(e){return e.game.gamePlayers})),t=Object(n.useState)([]),a=Object(C.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){if(e&&e.players){var t=[];!function(){for(var a=0;a<4;++a)t.push(c.a.createElement(J,{key:a,color:a,player:e.players[a]}));i(t)}()}}),[e]),c.a.createElement("div",{className:"create-game__players"},r)},X=function(e,t){return function(a,n){var c=n().game.gamePlayers.players,r=c.findIndex((function(e){return e.key===t}));a({type:"SEND_MESSAGE",payload:{msg:e,nick:c[r].login,color:q[r],type:"msg"}})}},Q=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],r=t[1],i=Object(s.c)((function(e){return e.auth.userId})),o=Object(s.b)(),l=function(e){e.preventDefault(),a&&(b.emit("chat",a),o(X(a,i)),r(""))};return c.a.createElement("div",{className:"create-game__chat-form"},c.a.createElement("form",{onSubmit:l,onKeyPress:function(e){"Enter"===e.key&&l(e)}},c.a.createElement("textarea",{value:a,onChange:function(e){return r(e.target.value)}}),c.a.createElement("button",null,"Wy\u015blij")))},$=function(){var e=Object(s.c)((function(e){return e.chat})),t=Object(n.useRef)(null),a=e.map((function(e,t){return"msg"===e.type?c.a.createElement("div",{className:"create-game__chat-msg",key:t},c.a.createElement("div",{className:"create-game__msg-user",style:{color:"".concat(e.color)}},e.nick,":"),c.a.createElement("div",{className:"create-game__msg-text"},e.msg)):c.a.createElement("div",{className:"create-game__chat-msg",key:t},c.a.createElement("div",{className:"create-game__msg-text"},e.msg))}));return Object(n.useEffect)((function(){t.current.scrollTo(0,t.current.scrollHeight)})),c.a.createElement("div",{className:"create-game__chat"},c.a.createElement("div",{className:"create-game__chat-main",ref:t},a),c.a.createElement(Q,null))},ee=function(e,t,a,n){return function(c){c({type:"SET_ALERT",payload:{title:e,msg:t,type:a,func:n}})}},te=function(e){return{type:"GET_PLAYERS",payload:e}},ae=function(e){return{type:"SET_INVITE_GAME",payload:e}},ne=function(e){return{type:"PAWN_MOVE",payload:e}},ce=(a(63),Object(l.g)((function(e){var t=e.history,a=Object(s.c)((function(e){return e.auth.loading})),r=Object(s.c)((function(e){return e.auth.user})),i=Object(s.c)((function(e){return e.game.isCreator})),o=Object(s.c)((function(e){return e.game.gamePlayers})),u=Object(s.b)();Object(n.useEffect)((function(){!a&&r&&(b.emit("createGame"),u({type:"CREATE_GAME"}))}),[a,r,u]),Object(n.useEffect)((function(){if(o&&!0===o.started)return t.push("/game")}),[o,t]);return a||r?a?null:c.a.createElement("div",{className:"create-game"},c.a.createElement(B,null),c.a.createElement("div",{className:"create-game__btns"},c.a.createElement("div",{className:"create-game__btn",onClick:function(){if(o.id)return 1===o.players.length?u(ee("B\u0142\u0105d","Aby rozpocz\u0105\u0107 gr\u0119 musi by\u0107 minimum dw\xf3ch graczy")):void b.emit("startGame",o.id)}},"Rozpocznij gr\u0119"),c.a.createElement("div",{className:"create-game__btn",onClick:function(){o.id&&(b.emit("removeGame",o.id),t.push("/"))}},"Wyjd\u017a z gry")),c.a.createElement($,null),i&&c.a.createElement(Z,null)):c.a.createElement(l.a,{to:"/"})}))),re=Object(l.g)((function(e){var t=e.history,a=Object(s.c)((function(e){return e.auth.loading})),r=Object(s.c)((function(e){return e.auth.user})),i=Object(s.c)((function(e){return e.game.inGame})),o=Object(s.c)((function(e){return e.game.gamePlayers})),u=Object(s.b)();return Object(n.useEffect)((function(){if(o&&!0===o.started)return t.push("/game")}),[o,t]),i&&(a||r)?c.a.createElement("div",{className:"create-game"},c.a.createElement(B,null),c.a.createElement("div",{className:"create-game__btns"},c.a.createElement("div",{className:"create-game__btn",onClick:function(){b.emit("escapeFromGame"),u((function(e){e({type:"CLEAN_CHAT"}),e({type:"LEAVE_GAME"})})),t.push("/")}},"Wyjd\u017a z gry")),c.a.createElement($,null)):c.a.createElement(l.a,{to:"/"})})),ie=function(){var e=Object(s.c)((function(e){return e.auth.loading})),t=Object(s.c)((function(e){return e.auth.user})),a=Object(s.b)(),n=function(e){a(_(e))};return c.a.createElement("div",{className:"menu"},!e&&c.a.createElement("div",{className:"menu__panel"},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(o.b,{to:"/create-game",className:"menu__option"},"Stw\xf3rz gr\u0119"),c.a.createElement("div",{className:"menu__option",onClick:function(){a(N())}},"Wyloguj si\u0119")):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"menu__option",onClick:function(){return n("login")}},"Zaloguj si\u0119"),c.a.createElement("div",{className:"menu__option",onClick:function(){return n("register")}},"Rejestracja"))))},oe=function(){return c.a.createElement(ie,null)},le=(a(146),function(){var e=Object(s.c)((function(e){return e.game}));return e.inGame&&e.gamePlayers&&e.gamePlayers.started?c.a.createElement(l.a,{to:"/game"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(D,null),c.a.createElement(j,null),c.a.createElement("div",{className:"lobby"},c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/create-game",component:ce}),c.a.createElement(l.b,{path:"/lobby",component:re}),c.a.createElement(l.b,{path:"/",component:oe}))))}),se=a(21),ue=function(e){var t=e.number,a=e.fieldFunction;return c.a.createElement("div",{className:"field field-".concat(t," ").concat(a)})},me=a(70),fe=a.n(me),de=function(){var e=[];return function(){for(var t=0;t<4;++t)e.push(c.a.createElement("div",{key:t,className:"fields-".concat(t," fields-end")},c.a.createElement("div",{className:"field field-end-0"}),c.a.createElement("div",{className:"field field-end-1"}),c.a.createElement("div",{className:"field field-end-2"}),c.a.createElement("div",{className:"field field-end-3"}),c.a.createElement("div",{className:"field field-end-4"}),c.a.createElement("div",{className:"field field-end-5"})))}(),c.a.createElement(c.a.Fragment,null,e,c.a.createElement("div",{className:"field-center"},c.a.createElement("img",{src:fe.a,alt:""})))},pe=function(){var e=Object(n.useState)([]),t=Object(C.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){for(var e=function(e){var t="";1===e?t="field-start-0":14===e?t="field-start-1":27===e?t="field-start-2":40===e?t="field-start-3":9!==e&&22!==e&&35!==e&&48!==e||(t="field-safe"),r((function(a){return[].concat(Object(se.a)(a),[c.a.createElement(ue,{key:e,number:e,fieldFunction:t})])}))},t=1;t<53;++t)e(t)}),[]),c.a.createElement("div",{className:"fields"},a,c.a.createElement(de,null))},Ee=function(){var e=Object(s.c)((function(e){return e.game.gamePlayers.players}));console.log(e);var t=[];return function(){for(var a=0;a<4;++a)console.log(e[a]),t.push(c.a.createElement("div",{key:a,className:"area area-".concat(a)},c.a.createElement("div",{className:"area__nick"},e[a]?e[a].login:"-"),c.a.createElement("div",{className:"area__items"},c.a.createElement("div",{className:"area__item"},c.a.createElement("div",{className:"area__center"})),c.a.createElement("div",{className:"area__item"},c.a.createElement("div",{className:"area__center"})),c.a.createElement("div",{className:"area__item"},c.a.createElement("div",{className:"area__center"})),c.a.createElement("div",{className:"area__item"},c.a.createElement("div",{className:"area__center"})))))}(),c.a.createElement("div",{className:"areas"},t)},ge=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],r=t[1],i=Object(s.c)((function(e){return e.auth.userId})),o=Object(s.b)(),l=function(e){e.preventDefault(),a&&(b.emit("chat",a),o(X(a,i)),r(""))};return c.a.createElement("div",{className:"chat__form"},c.a.createElement("form",{onSubmit:l,onKeyPress:function(e){"Enter"===e.key&&l(e)}},c.a.createElement("textarea",{value:a,onChange:function(e){return r(e.target.value)}}),c.a.createElement("button",null,"Wy\u015blij")))},be=function(){var e=Object(s.c)((function(e){return e.chat})),t=Object(n.useRef)(null),a=e.map((function(e,t){return"msg"===e.type?c.a.createElement("div",{className:"create-game__chat-msg",key:t},c.a.createElement("span",{className:"create-game__msg-user",style:{color:"".concat(e.color)}},e.nick,":"),c.a.createElement("span",{className:"create-game__msg-text"},e.msg)):c.a.createElement("div",{className:"create-game__chat-msg",key:t},c.a.createElement("div",{className:"create-game__msg-text"},e.msg))}));return Object(n.useEffect)((function(){t.current.scrollTo(0,t.current.scrollHeight)})),c.a.createElement("div",{className:"game__chat"},c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__title"},"Chat"),c.a.createElement("div",{className:"chat__main",ref:t},a),c.a.createElement(ge,null)))},_e=a(71),ve=a.n(_e),ye=a(72),he=a.n(ye),Oe=a(73),Ne=a.n(Oe),je=a(74),ke=a.n(je),we=[ve.a,ke.a,Ne.a,he.a],Ce=function(e){var t=e.player,a=e.number,r=e.value,i=Object(n.useRef)(r),o=Object(s.c)((function(e){return e.auth.userId})),l=Object(s.c)((function(e){return e.game.canMove})),u=Object(s.c)((function(e){return e.game.dissconnect})),m=Object(n.useState)({x:0,y:0}),f=Object(C.a)(m,2),d=f[0],p=f[1],E=Object(n.useCallback)((function(){if(0===i.current){var e=document.querySelector(".area-".concat(t.number," .area__item:nth-child(").concat(Number(a)+1,") .area__center"));p({x:e.offsetLeft+e.parentElement.parentElement.offsetLeft+e.parentElement.parentElement.parentElement.offsetLeft+e.offsetWidth/2,y:e.offsetTop+e.parentElement.parentElement.offsetTop+e.parentElement.parentElement.parentElement.offsetTop})}else if(Number(i.current)){var n=document.querySelector(".field-".concat(i.current));p({x:n.offsetLeft+n.offsetWidth/2+7.025,y:n.offsetTop-3})}else{var c=document.querySelector(".fields-".concat(t.number," .field-").concat(i.current));p({x:c.offsetLeft+c.offsetWidth/2+7.025,y:c.offsetTop-3})}}),[i,a,t.number]);Object(n.useEffect)((function(){if(r>51){var e=r-52;i.current="end-".concat(e)}else 0!==r?0===t.number?i.current=r:r<=52-13*t.number?i.current=r+13*t.number:i.current=r-(52-13*t.number):i.current=0;E()}),[r,E,t]),Object(n.useEffect)((function(){return window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}}),[E]);return c.a.createElement("div",{className:"pawns__pawn ".concat(o===t.id&&!0===l[a]&&0===u.length?"pawns__move":""),onClick:function(){o===t.id&&!0===l[a]&&0===u.length&&b.emit("pawnMove",a)},style:{left:d.x+"px",top:d.y+"px"}},c.a.createElement("img",{src:we[t.number],alt:""}))},Ae=function(){var e=Object(s.c)((function(e){return e.game.gamePlayers.board})),t=[];for(var a in e)for(var n in e[a].pawns)t.push(c.a.createElement(Ce,{key:"".concat(a).concat(n),player:e[a],number:n,value:e[a].pawns[n]}));return c.a.createElement("div",{className:"pawns"},t)},Te=a(75),Se=a.n(Te),ze=a(76),Re=a.n(ze),Ge=a(77),xe=a.n(Ge),Le=a(78),Ie=a.n(Le),Me=a(79),Pe=a.n(Me),We=a(80),De=a.n(We),Ue=[Se.a,Re.a,xe.a,Ie.a,Pe.a,De.a],Fe=function(){var e=Object(s.c)((function(e){return e.game.gamePlayers.players})),t=Object(s.c)((function(e){return e.game.gamePlayers.turn})),a=Object(s.c)((function(e){return e.auth.userId})),n=Object(s.c)((function(e){return e.game.dice})),r=e.find((function(e){return e.key===t})).login;return c.a.createElement("div",{className:"game__dice"},t===a?n?c.a.createElement("div",{className:"game__dice-number"},c.a.createElement("img",{src:Ue[n-1],alt:n})):c.a.createElement("div",{className:"game__dice-strike",onClick:function(){b.emit("randomNumber")}},"Rzu\u0107 Kostk\u0105"):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Kolejka gracza"),c.a.createElement("h1",null,r)))},He=function(){var e=Object(s.c)((function(e){return e.game.dissconnect})),t=e.map((function(e){return c.a.createElement("div",{className:"dissconnect__msg",key:e},"Oczekiwanie na ".concat(e,"..."))}));return 0===e.length?null:c.a.createElement("div",{className:"dissconnect"},t)},Ke=(a(147),function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],r=t[1],i=Object(s.c)((function(e){return e.game.gamePlayers})),o=Object(s.c)((function(e){return e.auth.user}));return console.log("game",o),Object(n.useEffect)((function(){r(!0)}),[]),!o||!i||i&&!i.started?c.a.createElement(l.a,{to:"/"}):c.a.createElement("div",{className:"game__container"},c.a.createElement("div",{className:"game"},c.a.createElement(pe,null),c.a.createElement(Ee,null),a&&c.a.createElement(Ae,null),c.a.createElement(He,null)),c.a.createElement("div",{className:"game__panel"},c.a.createElement(be,null),c.a.createElement(Fe,null)))}),Ve=function(){return c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/game",exact:!0,component:Ke}),c.a.createElement(l.b,{path:"/",component:le}))},Ye=(a(148),Object(l.g)((function(e){var t=e.history,a=Object(s.c)((function(e){return e.alert})),n=Object(s.c)((function(e){return e.game.invite})),r=Object(s.b)(),i=function(){r({type:"CLOSE_ALERT"}),a.func&&a.func()};return a.open?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"alert__popup"},c.a.createElement("div",{className:"alert"},c.a.createElement("div",{className:"alert__title"},a.title),c.a.createElement("div",{className:"alert__desc"},a.msg),c.a.createElement("div",{className:"alert__button-container"},"invite"===a.type?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"alert__button alert__button-accept",onClick:function(){n&&(r({type:"JOIN_GAME"}),b.emit("acceptInvite",n),r(ae(null)),t.push("/lobby")),i()}},"Akceptuj"),c.a.createElement("div",{className:"alert__button alert__button-cancel",onClick:function(){r(ae(null)),i()}},"Odrzu\u0107")):c.a.createElement("div",{className:"alert__button",onClick:i},"Rozumiem"))))):null}))),Ze=a(13),qe=a(81),Je=a(82),Be={user:null,userId:null,loading:!1,openWinow:null,token:null,errors:null},Xe={open:!1,msg:"",title:"",type:"",func:null},Qe={players:[],invite:null,gamePlayers:null,isCreator:!1,inGame:!1,dice:null,canMove:{},dissconnect:[]},$e=[],et=Object(Ze.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"TOGGLE_LOGIN_WINDOW":return Object(w.a)({},e,{openWinow:n,errors:null});case"SET_AUTH_LOADING":return Object(w.a)({},e,{loading:n});case"GET_USER":return Object(w.a)({},e,{token:localStorage.token,user:n});case"SET_USER_ID":return Object(w.a)({},e,{userId:n,loading:!1});case"CREATE_ACCOUNT":case"LOGIN":return Object(w.a)({},e,{openWinow:null});case"LOGOUT":case"ALREADY_LOGIN":return window.localStorage.removeItem("token"),Object(w.a)({},e,{user:null,token:null,loading:!1});case"AUTH_ERROR":var c={};return n&&n.forEach((function(e){return c[e.param]=e.msg})),Object(w.a)({},e,{token:null,user:null,loading:!1,errors:c});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"SET_ALERT":return Object(w.a)({},e,{},a,{open:!0});case"CLOSE_ALERT":return Xe;default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"GET_PLAYERS":var c=[];for(var r in a)c.push({login:a[r],socket:r});return Object(w.a)({},e,{players:c});case"SET_INVITE_GAME":return Object(w.a)({},e,{invite:a});case"GET_GAME_PLAYERS":case"START_GAME":return Object(w.a)({},e,{gamePlayers:a});case"CREATE_GAME":return Object(w.a)({},e,{isCreator:!0,inGame:!0});case"JOIN_GAME":return Object(w.a)({},e,{inGame:!0});case"GET_RANDOM_NUMBER":return Object(w.a)({},e,{dice:a.randomNumber,canMove:a.canMove});case"NEXT_TURN":return Object(w.a)({},e,{dice:null,canMove:{},gamePlayers:Object(w.a)({},e.gamePlayers,{turn:a})});case"PAWN_MOVE":return Object(w.a)({},e,{canMove:{},gamePlayers:Object(w.a)({},e.gamePlayers,{board:a})});case"PLAYER_DISSCONNECT":return Object(w.a)({},e,{dissconnect:[].concat(Object(se.a)(e.dissconnect),[a])});case"PLAYER_RETURN":var i=e.dissconnect.filter((function(e){return e!==a.nick}));return Object(w.a)({},e,{dissconnect:i,gamePlayers:a.game,inGame:!0});case"END_GAME":case"KICK":case"REMOVE_GAME":case"LEAVE_GAME":return Qe;default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"SEND_MESSAGE":return[].concat(Object(se.a)(e),[a]);case"CLEAN_CHAT":return $e;default:return e}}}),tt=Object(Ze.createStore)(et,Object(qe.composeWithDevTools)(Object(Ze.applyMiddleware)(Je.a))),at=function(e){e.dispatch(y()),b.on("isLogin",(function(t){!0===t?(e.dispatch({type:"ALREADY_LOGIN"}),e.dispatch(ee("B\u0142\u0105d","Kto\u015b ju\u017c jest zalogowany na twoje konto!"))):e.dispatch({type:"SET_USER_ID",payload:t})})),b.on("getPlayersList",(function(t){e.dispatch(te(t))})),b.on("playerNotFound",(function(t){e.dispatch(te(t)),e.dispatch(ee("Nie znaleziono","Gracz nie m\xf3g\u0142 zosta\u0107 zaproszony, prawdopodobnie nie jest dost\u0119pny lub jest w innej grze"))})),b.on("gameNotFound",(function(){e.dispatch(ae(null)),e.dispatch(ee("Nie znaleziono","Gra nie zosta\u0142a znaleziona"))})),b.on("err",(function(){e.dispatch(ae(null)),e.dispatch(ee("B\u0142\u0105d","Ups... Co\u015b posz\u0142o nie tak, spr\xf3buj ponownie"))})),b.on("inviteToGame",(function(t){var a=t.id,n=t.inviter;e.dispatch(ae(a)),e.dispatch(ee("Zaproszenie do gry","Gracz ".concat(n," zaprasza ci\u0119 do gry"),"invite"))})),b.on("join",(function(t){e.dispatch({type:"GET_GAME_PLAYERS",payload:t})})),b.on("joinGame",(function(){e.dispatch({type:"JOIN_GAME"})})),b.on("kick",(function(){e.dispatch((function(e){e({type:"CLEAN_CHAT"}),e({type:"KICK"})})),e.dispatch(ee("Zosta\u0142e\u015b wyrzucony","Niestety zosta\u0142e\u015b wyrzucony z gry"))})),b.on("removeGame",(function(){e.dispatch((function(e){e({type:"CLEAN_CHAT"}),e({type:"REMOVE_GAME"})}))})),b.on("startGame",(function(t){e.dispatch({type:"START_GAME",payload:t})})),b.on("chat",(function(t){e.dispatch(X(t.msg,t.user))})),b.on("chatInfo",(function(t){e.dispatch(function(e){return{type:"SEND_MESSAGE",payload:{msg:e,type:"info"}}}(t))})),b.on("randomNumber",(function(t){var a=t.randomNumber,n=t.canMove;e.dispatch(function(e,t){return{type:"GET_RANDOM_NUMBER",payload:{randomNumber:e,canMove:t}}}(a,n))})),b.on("nextTurn",(function(t){e.dispatch(function(e){return{type:"NEXT_TURN",payload:e}}(t))})),b.on("pawnMove",(function(t){e.dispatch(ne(t))})),b.on("dissconnect",(function(t){e.dispatch(function(e){return{type:"PLAYER_DISSCONNECT",payload:e}}(t))})),b.on("return",(function(t){e.dispatch(function(e){return{type:"PLAYER_RETURN",payload:e}}(t))})),b.on("end-game",(function(t){var a=t.board,n=t.winner;e.dispatch(ne(a)),e.dispatch(function(e){return function(t){t(ee("Koniec gry","Gra dobieg\u0142a ko\u0144ca, zwyci\u0119\u017cy\u0142 gracz ".concat(e))),t({type:"END_GAME"}),t({type:"CLEAN_CHAT"})}}(n))}))},nt=(a(149),a(150),function(){return c.a.createElement(s.a,{store:tt},c.a.createElement(o.a,null,at(tt),c.a.createElement(Ye,null),c.a.createElement("div",{className:"App"},c.a.createElement(Ve,null))))});i.a.render(c.a.createElement(nt,null),document.getElementById("root"))},63:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/center.da70467a.svg"},71:function(e,t,a){e.exports=a.p+"static/media/blue.0f076646.png"},72:function(e,t,a){e.exports=a.p+"static/media/green.8af5ffbc.png"},73:function(e,t,a){e.exports=a.p+"static/media/red.c2f241e9.png"},74:function(e,t,a){e.exports=a.p+"static/media/yellow.934532af.png"},75:function(e,t,a){e.exports=a.p+"static/media/dice1.89fb4a23.png"},76:function(e,t,a){e.exports=a.p+"static/media/dice2.3ccd9cc1.png"},77:function(e,t,a){e.exports=a.p+"static/media/dice3.17bb259b.png"},78:function(e,t,a){e.exports=a.p+"static/media/dice4.11504f4f.png"},79:function(e,t,a){e.exports=a.p+"static/media/dice5.3e63db92.png"},80:function(e,t,a){e.exports=a.p+"static/media/dice6.5dd5a062.png"},83:function(e,t,a){e.exports=a(151)}},[[83,1,2]]]);
//# sourceMappingURL=main.baceb060.chunk.js.map